<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson: Binary Color Mixer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827; /* bg-gray-900 */
            color: #d1d5db; /* text-gray-300 */
        }
        .lesson-container {
            max-width: 768px; /* md:max-w-3xl */
            margin: 2rem auto;
            padding: 2rem;
            background-color: #1f2937; /* bg-gray-800 */
            border-radius: 0.75rem; /* rounded-xl */
            border: 1px solid #4f46e5; /* border-indigo-600 */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .foreman-sprite {
            width: 64px;
            height: 64px;
            margin-right: 1rem;
            flex-shrink: 0;
        }
        .color-switch {
            width: 40px; height: 40px;
            border-radius: 4px; cursor: pointer;
            border: 2px solid #374151; /* border-gray-700 */
            font-size: 1.5rem; /* text-2xl */
            font-family: 'Roboto Mono', monospace;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease-in-out;
        }
        .color-switch.off { background-color: #4b5563; color: #9ca3af; } /* bg-gray-600 text-gray-400 */
        .color-switch.on { background-color: #a3e635; color: #1f2937; border-color: #a3e635; } /* bg-lime-400 text-gray-800 */
        #color-display {
            width: 100%;
            height: 150px;
            border-radius: 0.5rem; /* rounded-lg */
            border: 4px solid #374151; /* border-gray-700 */
            transition: background-color 0.3s ease-in-out;
        }
        .color-value-text {
            font-family: 'Roboto Mono', monospace;
            font-size: 1.25rem; /* text-xl */
        }
    </style>
</head>
<body>

    <div class="lesson-container">
        <!-- Header -->
        <div class="flex items-center mb-6">
            <div id="foreman-svg-container">
                <!-- SVG will be injected here -->
            </div>
            <div>
                <h1 class="text-2xl font-bold text-indigo-400">Lesson: Colors from Numbers</h1>
                <p class="text-gray-400">See how simple 0s and 1s create every color on your screen.</p>
            </div>
        </div>

        <!-- Instructional Text -->
        <div class="bg-gray-900 p-4 rounded-lg mb-6 min-h-[80px]">
            <p id="instruction-text" class="text-lg">
                Every color on a screen is a mix of Red, Green, and Blue (RGB). By turning these binary switches ON (1) or OFF (0), you are setting the value for each color channel. Try flipping some switches!
            </p>
        </div>

        <!-- Main Display Area -->
        <div class="flex flex-col md:flex-row gap-6">
            <!-- Color Preview -->
            <div class="md:w-1/3 flex flex-col items-center">
                 <h3 class="text-lg text-center font-semibold mb-2">COLOR PREVIEW</h3>
                 <div id="color-display" style="background-color: rgb(0, 0, 0);"></div>
                 <div id="rgb-value-display" class="mt-2 color-value-text">rgb(0, 0, 0)</div>
            </div>

            <!-- Controls -->
            <div class="flex-grow">
                 <h3 class="text-lg text-center font-semibold mb-2">BINARY CONTROLS</h3>
                 <div class="space-y-4">
                    <!-- Red Channel -->
                    <div>
                        <p class="font-bold text-red-500">RED</p>
                        <div id="switches-R" class="flex justify-around p-3 bg-gray-900/50 rounded"></div>
                    </div>
                    <!-- Green Channel -->
                    <div>
                        <p class="font-bold text-green-500">GREEN</p>
                        <div id="switches-G" class="flex justify-around p-3 bg-gray-900/50 rounded"></div>
                    </div>
                    <!-- Blue Channel -->
                    <div>
                        <p class="font-bold text-blue-500">BLUE</p>
                        <div id="switches-B" class="flex justify-around p-3 bg-gray-900/50 rounded"></div>
                    </div>
                 </div>
            </div>
        </div>
    </div>

    <script>
        // --- Foreman SVG ---
        const foremanSvg = `<svg class="foreman-sprite" viewBox="0 0 16 16"><path fill="#fde68a" d="M5,6h6v5H5V6z"/><path fill="#f97316" d="M4,4h8v2H4V4z"/><path fill="#15803d" d="M4,11h8v3H4V11z"/><path fill="#000" d="M6,7h1v1H6V7zm3,0h1v1H9V7z"/></svg>`;
        document.getElementById('foreman-svg-container').innerHTML = foremanSvg;

        // --- DOM Elements ---
        const colorDisplay = document.getElementById('color-display');
        const rgbValueDisplay = document.getElementById('rgb-value-display');
        const switchesR = document.getElementById('switches-R');
        const switchesG = document.getElementById('switches-G');
        const switchesB = document.getElementById('switches-B');

        // --- State ---
        const colorState = {
            R: [0, 0, 0, 0],
            G: [0, 0, 0, 0],
            B: [0, 0, 0, 0]
        };

        // --- Functions ---

        /**
         * Converts a 4-element binary array to its decimal equivalent.
         * @param {Array<number>} arr - The binary array [8, 4, 2, 1].
         * @returns {number} The decimal value (0-15).
         */
        const binaryToDecimal = arr => arr.reduce((acc, val, i) => acc + val * [8, 4, 2, 1][i], 0);

        /**
         * Updates the color display based on the current state.
         */
        function updateColor() {
            // Convert 4-bit value (0-15) to an 8-bit RGB value (0-255) by multiplying by 17.
            const r = binaryToDecimal(colorState.R) * 17;
            const g = binaryToDecimal(colorState.G) * 17;
            const b = binaryToDecimal(colorState.B) * 17;

            const rgbString = `rgb(${r}, ${g}, ${b})`;
            
            colorDisplay.style.backgroundColor = rgbString;
            rgbValueDisplay.textContent = rgbString;
        }

        /**
         * Creates the binary switches for a given color channel.
         * @param {HTMLElement} container - The container to append switches to.
         * @param {string} color - The color channel ('R', 'G', or 'B').
         */
        function createSwitches(container, color) {
            // Place values for each bit: 8, 4, 2, 1
            const placeValues = [8, 4, 2, 1];
            container.innerHTML = [0, 1, 2, 3].map(i => `
                <div class="flex flex-col items-center">
                    <div class="color-switch off" data-color="${color}" data-index="${i}">0</div>
                    <div class="mt-1 text-sm text-gray-400 font-mono">${placeValues[i]}</div>
                </div>
            `).join('');
        }
        
        /**
         * Handles click events on the switch containers.
         * @param {Event} e - The click event.
         */
        function handleSwitchClick(e) {
            const s = e.target.closest('.color-switch');
            if (!s) return; // Exit if the click was not on a switch

            const color = s.dataset.color;
            const index = parseInt(s.dataset.index);
            const isNowOn = !s.classList.contains('on');

            // Update state
            colorState[color][index] = isNowOn ? 1 : 0;

            // Update visuals
            s.classList.toggle('on', isNowOn);
            s.classList.toggle('off', !isNowOn);
            s.textContent = isNowOn ? '1' : '0';

            // Recalculate and display the new color
            updateColor();
        }

        // --- Initial Setup ---
        
        // Create switches for each color channel
        createSwitches(switchesR, 'R');
        createSwitches(switchesG, 'G');
        createSwitches(switchesB, 'B');

        // Add event listeners to the parent containers
        switchesR.addEventListener('click', handleSwitchClick);
        switchesG.addEventListener('click', handleSwitchClick);
        switchesB.addEventListener('click', handleSwitchClick);

        // Set the initial color
        updateColor();

    </script>
</body>
</html>

