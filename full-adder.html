<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Full-Adder Explainer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a;
            color: #e2e8f0;
            touch-action: manipulation;
        }
        .explainer-container {
            background-color: #1e293b;
            border: 1px solid #f97316;
        }
        .bit-display {
            font-family: 'Roboto Mono', monospace;
            transition: all 0.2s ease-in-out;
            user-select: none;
            cursor: pointer;
            width: 56px;
            height: 56px;
            border-radius: 0.375rem;
            border-width: 2px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
        }
        .bit-display.off { background-color: #475569; color: #f87171; border-color: #475569; }
        .bit-display.on { background-color: #1e293b; color: #4ade80; border-color: #4ade80; }
        
        .circuit-line { stroke: #475569; stroke-width: 4; stroke-linecap: round; transition: stroke 0.2s, filter 0.2s; fill: none; }
        .circuit-line.powered { stroke: #fde047; filter: drop-shadow(0 0 3px #fde047); }
        .junction { fill: #475569; transition: fill 0.2s; }
        .junction.powered { fill: #fde047; }
        
        .component-label {
            font-family: 'Roboto Mono', monospace;
            fill: #fb923c;
            font-size: 12px;
            font-weight: bold;
            text-anchor: middle;
        }
        .gate-symbol-and { fill: #3b82f6; }
        .gate-symbol-xor { fill: #9333ea; }
        .gate-symbol-or { fill: #be185d; }
        .gate-text { font-size: 12px; font-weight: bold; fill: white; text-anchor: middle; dominant-baseline: central; pointer-events: none; }

        .column-addition {
            font-family: 'Roboto Mono', monospace;
            font-size: 1.5rem;
            line-height: 1.4;
            background-color: #334155;
            padding: 1rem;
            border-radius: 0.375rem;
            width: 160px;
            text-align: right;
        }
        .carry-bit {
            color: #fde047;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        .carry-bit.visible { opacity: 1; }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-2 sm:p-4">

    <div id="explainer-container" class="p-4 sm:p-6 rounded-lg w-full max-w-7xl mx-auto">
        <!-- Content injected by JS -->
    </div>
    
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const explainerContainer = document.getElementById('explainer-container');

        // The state holds the current value of our three inputs.
        let state = { inputs: { A: 0, B: 0, CarryIn: 0 } };

        function render() {
            explainerContainer.innerHTML = `
                <div class="text-center mb-4">
                    <h1 class="text-2xl sm:text-3xl font-bold text-white">The Full-Adder Circuit</h1>
                    <p class="text-slate-400 max-w-4xl mx-auto mt-2">A full-adder is a fundamental building block of computers. It adds three single-bit numbers together: A, B, and a 'Carry In' bit from the previous column.</p>
                </div>

                <div class="bg-slate-900/50 p-4 rounded-lg mb-6 border border-slate-700">
                    <h2 class="text-lg font-bold text-orange-400 mb-2">What is a "Carry" bit?</h2>
                    <p class="text-slate-400">If a column's sum is too large for one digit, the extra value is 'carried' over to the next column. This circuit produces a 'Carry-Out' bit that serves as the 'Carry-In' for the next calculation to the left.</p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 items-start">
                    <div class="lg:col-span-2 bg-slate-800 p-2 sm:p-4 rounded-lg shadow-inner">
                        <svg viewBox="0 0 620 500" class="w-full">
                            <!-- Inputs -->
                            <text x="5" y="75" fill="#e2e8f0">A</text>
                            <foreignObject x="20" y="50" width="60" height="60"><div xmlns="http://www.w3.org/1999/xhtml"><div id="input_A" class="bit-display off">0</div></div></foreignObject>
                            
                            <text x="5" y="205" fill="#e2e8f0">B</text>
                            <foreignObject x="20" y="180" width="60" height="60"><div xmlns="http://www.w3.org/1999/xhtml"><div id="input_B" class="bit-display off">0</div></div></foreignObject>

                            <text x="50" y="395" text-anchor="middle" fill="#e2e8f0" font-size="14px">Carry In</text>
                            <foreignObject x="20" y="400" width="60" height="60"><div xmlns="http://www.w3.org/1999/xhtml"><div id="input_CarryIn" class="bit-display off">0</div></div></foreignObject>

                            <!-- Circuit Lines and Gates -->
                            <!-- Half Adder 1 -->
                            <text class="component-label" x="200" y="20">Half-Adder 1</text>
                            <path id="line_a_main" d="M80 80 H 120" class="circuit-line" />
                            <circle id="junc_a1" cx="120" cy="80" r="5" class="junction" />
                            <path id="line_a_to_xor1" d="M120 80 V 80 H 150" class="circuit-line" />
                            <path id="line_a_to_and1" d="M120 80 V 180 H 150" class="circuit-line" />
                            
                            <path id="line_b_main" d="M80 210 H 120" class="circuit-line" />
                            <circle id="junc_b1" cx="120" cy="210" r="5" class="junction" />
                            <path id="line_b_to_xor1" d="M120 210 V 100 H 150" class="circuit-line" />
                            <path id="line_b_to_and1" d="M120 210 V 200 H 150" class="circuit-line" />

                            <g transform="translate(150, 70)"><path d="M10 5 C 20 5, 30 10, 40 20 C 30 30, 20 35, 10 35 Q 25 20, 10 5 Z" class="gate-symbol-xor"/><path d="M5 5 Q 20 20, 5 35" stroke-width="4" stroke="#9333ea" fill="none"/><text x="28" y="20" class="gate-text">XOR</text></g>
                            <g transform="translate(150, 170)"><path d="M10 5 H30 C 45 5, 45 35, 30 35 H10 Z" class="gate-symbol-and" /><text x="26" y="20" class="gate-text">AND</text></g>

                            <path id="line_ha1_sum" d="M190 90 H 280" class="circuit-line" />
                            <text x="230" y="80" fill="#94a3b8" font-size="10px">Sum 1</text>
                            <path id="line_ha1_carry" d="M190 190 H 400 V 380 H 430" class="circuit-line" />
                            <text x="300" y="180" fill="#94a3b8" font-size="10px">Carry 1</text>

                            <!-- Half Adder 2 -->
                            <text class="component-label" x="375" y="250">Half-Adder 2</text>
                            <path id="line_carryIn_main" d="M80 430 H 280" class="circuit-line" />
                            <circle id="junc_carryIn" cx="280" cy="430" r="5" class="junction" />
                            <path id="line_carryIn_to_xor2" d="M280 430 V 330 H 310" class="circuit-line" />
                            <path id="line_carryIn_to_and2" d="M280 430 V 450 H 310" class="circuit-line" />

                            <circle id="junc_sum1" cx="280" cy="90" r="5" class="junction" />
                            <path id="line_sum1_to_xor2" d="M280 90 V 310 H 310" class="circuit-line" />
                            <path id="line_sum1_to_and2" d="M280 90 V 430 H 310" class="circuit-line" />

                            <g transform="translate(310, 300)"><path d="M10 5 C 20 5, 30 10, 40 20 C 30 30, 20 35, 10 35 Q 25 20, 10 5 Z" class="gate-symbol-xor"/><path d="M5 5 Q 20 20, 5 35" stroke-width="4" stroke="#9333ea" fill="none"/><text x="28" y="20" class="gate-text">XOR</text></g>
                            <g transform="translate(310, 420)"><path d="M10 5 H30 C 45 5, 45 35, 30 35 H10 Z" class="gate-symbol-and" /><text x="26" y="20" class="gate-text">AND</text></g>

                            <path id="line_ha2_sum" d="M350 320 H 520" class="circuit-line" />
                            <path id="line_ha2_carry" d="M350 440 H 400 V 400 H 430" class="circuit-line" />
                            <text x="370" y="465" fill="#94a3b8" font-size="10px">Carry 2</text>

                            <!-- Final OR Gate -->
                             <g transform="translate(430, 370)"><path d="M10 5 C 20 5, 30 10, 40 20 C 30 30, 20 35, 10 35 Q 25 20, 10 5 Z" class="gate-symbol-or"/><text x="28" y="20" class="gate-text">OR</text></g>
                             <path id="line_or_out" d="M470 390 H 520" class="circuit-line" />

                            <!-- Outputs -->
                            <text x="530" y="300" fill="#e2e8f0">Final Sum</text>
                            <foreignObject x="525" y="305" width="60" height="60"><div xmlns="http://www.w3.org/1999/xhtml"><div id="output_Sum" class="bit-display off">0</div></div></foreignObject>
                            
                            <text x="530" y="370" fill="#e2e8f0">Carry-Out</text>
                            <foreignObject x="525" y="375" width="60" height="60"><div xmlns="http://www.w3.org/1999/xhtml"><div id="output_Cout" class="bit-display off">0</div></div></foreignObject>
                        </svg>
                    </div>

                    <div class="flex flex-col gap-6 items-center">
                        <div id="explanation-area" class="text-center"></div>
                    </div>
                </div>
            `;
            
            // Add click listeners to the input boxes
            ['A', 'B', 'CarryIn'].forEach(id => {
                document.getElementById(`input_${id}`).addEventListener('click', () => {
                    state.inputs[id] = 1 - state.inputs[id];
                    updateCircuit();
                });
            });
            
            updateCircuit();
        }

        function updateCircuit() {
            const { A, B, CarryIn } = state.inputs;
            
            // --- LOGIC GATES ---
            const sum1 = A ^ B;
            const carry1 = A & B;
            const finalSum = sum1 ^ CarryIn;
            const carry2 = sum1 & CarryIn;
            const finalCout = carry1 | carry2;

            // --- VISUALS ---
            powerElement('input_A', A);
            powerElement('input_B', B);
            powerElement('input_CarryIn', CarryIn);
            powerElement('output_Sum', finalSum);
            powerElement('output_Cout', finalCout);

            powerLine('line_a_main', A);
            powerLine('line_a_to_xor1', A);
            powerLine('line_a_to_and1', A);
            powerJunc('junc_a1', A);

            powerLine('line_b_main', B);
            powerLine('line_b_to_xor1', B);
            powerLine('line_b_to_and1', B);
            powerJunc('junc_b1', B);
            
            powerLine('line_ha1_sum', sum1);
            powerJunc('junc_sum1', sum1);
            powerLine('line_ha1_carry', carry1);

            powerLine('line_sum1_to_xor2', sum1);
            powerLine('line_sum1_to_and2', sum1);

            powerLine('line_carryIn_main', CarryIn);
            powerJunc('junc_carryIn', CarryIn);
            powerLine('line_carryIn_to_xor2', CarryIn);
            powerLine('line_carryIn_to_and2', CarryIn);
            
            powerLine('line_ha2_sum', finalSum);
            powerLine('line_ha2_carry', carry2);
            powerLine('line_or_out', finalCout);

            updateExplanation(A, B, CarryIn, finalSum, finalCout);
        }

        function updateExplanation(a, b, carryIn, sum, cout) {
            const container = document.getElementById('explanation-area');
            const carryIsVisible = cout === 1;
            container.innerHTML = `
                <h3 class="text-xl font-bold text-white">Column Math</h3>
                <div class="column-addition mx-auto mt-2">
                    <div><span class="carry-bit ${carryIsVisible ? 'visible' : ''}">1</span>&nbsp;</div>
                    <div>&nbsp;${carryIn} <span class="text-xs text-slate-400">(Carry-In)</span></div>
                    <div>&nbsp;${a}</div>
                    <div>+ ${b}</div>
                    <div class="border-b-2 border-slate-400 my-1"></div>
                    <div>
                        <span class="font-bold text-yellow-400">${cout}</span>
                        <span class="font-bold text-green-400 ml-2">${sum}</span>
                    </div>
                </div>
                <p class="mt-4 text-slate-400 max-w-xs mx-auto">The <span class="text-yellow-400 font-bold">Carry-Out</span> (${cout}) becomes the <span class="text-yellow-400 font-bold">Carry-In</span> for the next column.</p>
            `;
        }
        
        function powerElement(id, isPowered) {
            const el = document.getElementById(id);
            if (el) {
                el.classList.toggle('on', !!isPowered);
                el.classList.toggle('off', !isPowered);
                el.textContent = isPowered ? '1' : '0';
            }
        }

        function powerLine(id, isPowered) {
            document.getElementById(id)?.classList.toggle('powered', !!isPowered);
        }
        function powerJunc(id, isPowered) {
            document.getElementById(id)?.classList.toggle('powered', !!isPowered);
        }

        render();
    });
    </script>
</body>
</html>
